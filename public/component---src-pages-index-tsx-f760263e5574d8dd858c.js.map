{"version":3,"file":"component---src-pages-index-tsx-f760263e5574d8dd858c.js","mappings":"uTAIIA,E,UAFEC,EAAoB,IAAIC,QAIxBC,EAAsB,SAACC,GAC3BA,EAAQC,SAAQ,SAACC,GACf,GAAIL,EAAkBM,IAAID,EAAME,QAAS,CACvC,IAAMC,EAAKR,EAAkBS,IAAIJ,EAAME,SAEnCF,EAAMK,gBAAkBL,EAAMM,kBAAoB,KACpDZ,EAASa,UAAUP,EAAME,QACzBP,EAAkBa,OAAOR,EAAME,QAC/BC,UAMFM,EAA0B,WAO9B,YANiBC,IAAbhB,IACFA,EAAW,IAAIiB,qBAAqBd,EAAqB,CACvDe,WAAY,QACZC,UAAW,OAGRnB,G,UC1BE,EAAQ,6BACRoB,EAAW,gCACXC,EAAY,iCACZC,EAAU,+BCOfC,E,MAAKC,GAAAA,KAAgBC,GAmG3B,EAzF+B,SAAC,GAMzB,IAAD,IFG0BC,EAAMC,EERpCC,EAKI,EALJA,QACAC,EAII,EAJJA,UACAC,EAGI,EAHJA,MACAC,EAEI,EAFJA,IACAC,EACI,EADJA,aAEA,GAA4BC,EAAAA,EAAAA,WAAS,GAA9BC,EAAP,KAAeC,EAAf,KAKA,GAAgCF,EAAAA,EAAAA,WAAS,GAAlCG,EAAP,KAAiBC,EAAjB,KACMC,GAASC,EAAAA,EAAAA,UFJeb,EEKdY,EFLoBX,EEKZ,WACtBU,GAAY,KFLdG,EAAAA,EAAAA,YAAU,WACR,GAAKd,EAAKe,QAAV,CAEA,IAAMjC,EAASkB,EAAKe,QACdzC,EAAWe,IAIjB,OAHAd,EAAkByC,IAAIlC,EAAQmB,GAC9B3B,EAAS2C,QAAQnC,GAEV,WACLP,EAAkBa,OAAON,GACzBR,EAASa,UAAUL,OAEpB,CAACkB,IEJJ,IAAMkB,EAAW,CACfvB,UAAW,CACTwB,MAAO,MACPC,SAAU,IACVC,SAAU,OAEZC,MAAO,CACLH,MAAO,MACPC,SAAU,MACVC,SAAU,OAEZE,OAAQ,CACNJ,MAAO,MACPC,SAAU,MACVC,SAAU,OAEZG,MAAO,CACLL,MAAO,OACPC,SAAU,MACVC,SAAU,SAIRI,EAAmCrB,EAAMqB,QAC3CC,OAAOC,KAAKvB,EAAMqB,SAASG,KAAI,SAACC,GAC9B,OAAO,OAAP,UAAYX,EAASW,GAAYzB,EAAMqB,QAAQI,OAEjD,GAEJ,OACEC,EAAAA,cAAAA,MAAAA,CACEC,IAAKnB,EACLT,UAAWN,EAAGM,EAAW,UAAW,CAAET,SAAUc,IAChDN,QAASA,GAET4B,EAAAA,cAAAA,MAAAA,CACE3B,UAAWN,EAAG,eACdmC,MAAO,CACLC,WAAgB7B,EAAM8B,OAAS9B,EAAMe,MAAS,IAApC,OAIbT,GACCoB,EAAAA,cAAAA,EAAAA,SAAAA,KACEA,EAAAA,cAAAA,MAAAA,CACE3B,UAAWN,EAAGS,EAAc,aAC5B6B,KAAK,UAAA/B,EAAMqB,eAAN,mBAAe9B,iBAAf,eAA0ByC,MAtDvC,qHAuDQ/B,IAAKD,EAAMiC,iBAAmBhC,GAAOD,EAAMkC,OAG7CR,EAAAA,cAAAA,UAAAA,KACGL,EAAQG,KAAI,gBAAGU,EAAH,EAAGA,KAAMF,EAAT,EAASA,IAAKhB,EAAd,EAAcA,SAAUC,EAAxB,EAAwBA,SAAxB,OACXS,EAAAA,cAAAA,SAAAA,CACES,IAAKD,EACLE,OAAQJ,EACRK,MAAK,eAAiBrB,EAAjB,uBAAgDC,EAAhD,WAGTS,EAAAA,cAAAA,MAAAA,CACE3B,UAAWN,EAAGS,EAAc,SAC5BD,IAAKD,EAAMiC,iBAAmBhC,GAAOD,EAAMkC,KAC3CH,IAAK/B,EAAMgC,IACXM,OAAQ,kBAAMjC,GAAU,W,iECOtC,IAvF6B,SAAC,GAAmC,IAAjCkC,EAAgC,EAAhCA,MAAOC,EAAyB,EAAzBA,YAAaxC,EAAY,EAAZA,MAC1CyC,GAAaC,EAAAA,EAAAA,eAAbD,SAKFT,EAAG,IAJQW,EAAAA,EAAAA,gBAlBR,cAkBDC,KAIYC,aAAab,IAAMS,EAYvC,OACEf,EAAAA,cAACoB,EAAAA,OAAD,CAAQP,MAAOA,GAEbb,EAAAA,cAAAA,OAAAA,CAAMqB,KAAK,QAAQC,QAAST,IAC5Bb,EAAAA,cAAAA,OAAAA,CAAMqB,KAAK,cAAcC,QAASR,IAClCd,EAAAA,cAAAA,OAAAA,CAAMqB,KAAK,QAAQC,QAAShD,IAG5B0B,EAAAA,cAAAA,OAAAA,CAAMuB,SAAS,UAAUD,QAAQ,YACjCtB,EAAAA,cAAAA,OAAAA,CAAMuB,SAAS,SAASD,QAAShB,IACjCN,EAAAA,cAAAA,OAAAA,CAAMuB,SAAS,WAAWD,QAAST,IACnCb,EAAAA,cAAAA,OAAAA,CAAMuB,SAAS,iBAAiBD,QAASR,IACzCd,EAAAA,cAAAA,OAAAA,CAAMuB,SAAS,WAAWD,QAAShD,IAGnC0B,EAAAA,cAAAA,OAAAA,CAAMuB,SAAS,eAAeD,QAAQ,wBACtCtB,EAAAA,cAAAA,OAAAA,CAAMuB,SAAS,cAAcD,QAAShB,IACtCN,EAAAA,cAAAA,OAAAA,CAAMuB,SAAS,gBAAgBD,QAAST,IACxCb,EAAAA,cAAAA,OAAAA,CAAMuB,SAAS,sBAAsBD,QAASR,IAC9Cd,EAAAA,cAAAA,OAAAA,CAAMuB,SAAS,gBAAgBD,QAAShD,O,mECtDjCkD,EAAiB,WAC5B,OAA0B/C,EAAAA,EAAAA,UAAS,MAA5BY,EAAP,KAAcoC,EAAd,KACA,GAAkChD,EAAAA,EAAAA,UAAS,MAApCiD,EAAP,KAAkBC,EAAlB,KAWA,OATA3C,EAAAA,EAAAA,YAAU,WACRyC,EAASG,OAAOC,YAChBD,OAAOE,iBAAiB,UAAU,kBAAML,EAASG,OAAOC,mBAG1D7C,EAAAA,EAAAA,YAAU,WACR2C,EAAatC,EAZU,OAatB,CAACA,IAEGqC,I,moBChBEK,EAAiB,uCACjBC,EAAc,oCACdC,EAAW,gCACXC,EAAW,gCCHXC,EAAa,6CACbC,EAAY,4CACZC,EAAe,+C,UCMpBtE,EAAKC,IAAAA,KAAgBC,GAwC3B,EApByC,SAAC,GAEnC,IAAD,IADJqE,QAAWzB,EACP,EADOA,MAAO0B,EACd,EADcA,KAAMC,EACpB,EADoBA,OAExB,OACExC,EAAAA,cAAAA,KAAAA,CAAI3B,UAAWN,EAAG,iBACfyE,EAAOC,KAAK,IACXzC,EAAAA,cAAC0C,EAAAA,EAAD,CACErE,UAAWN,EAAG,cACdO,MAAOkE,EAAOC,KAAK,GAAGE,WACtBpE,IAAKsC,EACLzC,QAAS,kBAAMwE,EAAAA,EAAAA,UAAS,aAAaL,MAGzCvC,EAAAA,cAAC6C,EAAAA,KAAD,CAAMxE,UAAWN,EAAG,aAAc+E,GAAE,aAAeP,GAChD1B,KC1CEkC,EAAW,mCACXC,EAAoB,6CACpB,EAAQ,gCACRC,EAAiB,0CACjBC,EAAe,wCACfC,EAAkB,2CCDvBpF,EAAKC,IAAAA,KAAgBC,GAkE3B,EAzDkC,SAAC,GAAgB,IAAduE,EAAa,EAAbA,OACnC,KAAKA,GAAYA,EAAOY,OAAS,GAAI,OAAO,KAE5C,IAAMC,GAAkBtE,EAAAA,EAAAA,UACxB,GAAqCN,EAAAA,EAAAA,UAAS,GAAvC6E,EAAP,KAAmBC,EAAnB,KAEMC,EAAchB,EAAOY,OAarBK,EAAa,kBAXIC,EAWgBJ,EAAa,EAV9CK,EAAQC,KAAKC,IACfD,KAAKE,IAAIF,KAAKG,MAAML,GAAgB,GACpCF,EAAc,GAGZE,GAAiBF,IAAaG,EAAQ,QAE1CJ,EAAeI,GARK,IAACD,EACjBC,GAsBN,OAVA3E,EAAAA,EAAAA,YAAU,WACR,IAAMgF,EAAQC,YAAW,WACvBR,MACC,KAEH,OAAO,WACLS,aAAaF,OAKfhE,EAAAA,cAAAA,MAAAA,CAAK3B,UAAWN,EAAG,aACjBiC,EAAAA,cAAAA,MAAAA,CAAK3B,UAAWN,EAAG,sBACjBiC,EAAAA,cAAAA,MAAAA,CAAK3B,UAAWN,EAAG,mBAAoBkC,IAAKoD,GACzCb,EAAO1C,KAAI,WAAwBqE,GAAxB,IAAe7F,EAAf,EAAGqE,WAAH,OACV3C,EAAAA,cAAAA,MAAAA,CACES,IAAKnC,EAAMkC,KACXnC,UAAWN,EAAG,kBACdmC,MAAO,CACLkE,QAASD,IAAMb,EAAa,EAAI,EAChCe,OAAQF,IAAMb,EAAa,EAAI,IAGjCtD,EAAAA,cAAC0C,EAAAA,EAAD,CACErE,UAAWN,EAAG,gBACdS,aAAcT,EAAG,SACjBO,MAAOA,Y,UChDjBP,EAAKC,IAAAA,KAAgBC,GAyF3B,EAvF4B,WAC1B,IAAMwE,GAAOxB,EAAAA,EAAAA,gBAAc,aAwC3B,IAAKwB,EAAK6B,MAAMrC,SAAU,OAAO,KAEjC,OAA8BxD,EAAAA,EAAAA,UAAS,IAAhC8F,EAAP,KAAgBC,EAAhB,KACM9C,GAAYF,EAAAA,EAAAA,MAElBxC,EAAAA,EAAAA,YAAU,YACRyF,EAAAA,EAAAA,GAAWhC,EAAK6B,MAAMrC,SAASQ,KAAMf,EAAW8C,KAC/C,CAAC9C,IAEJ,IAAMK,EAAiBU,EAAK6B,MAAMrC,SAASQ,KAAKiC,QAC9C,SAAC3C,EAAD,GAAkE,IAAD,IAA9CY,WAAcgC,EAAgC,EAAhCA,SAAUC,EAAsB,EAAtBA,cACzC,OAAKD,EACC,GAAN,eAAW5C,GAAX,CAA2B6C,EAAcnC,OADnBV,IAGxB,IAGF,OACE/B,EAAAA,cAAAA,EAAAA,SAAAA,KACEA,EAAAA,cAAC6E,EAAAA,EAAD,CACEhE,MAAO,oCACPC,YAAY,sHACZxC,MAAM,uCAGPyD,EAAeqB,OAAS,GAAK1B,GAC5B1B,EAAAA,cAAAA,UAAAA,CAAS3B,UAAWN,EAAG,mBACrBiC,EAAAA,cAAC8E,EAAD,CAAUtC,OAAQT,KAItB/B,EAAAA,cAAAA,KAAAA,KAAAA,YAEAA,EAAAA,cAAAA,UAAAA,CAAS3B,UAAWN,EAAG,aACpBwG,EAAQzE,KAAI,SAACmC,EAAUkC,GAAX,OACXnE,EAAAA,cAAAA,KAAAA,CAAI3B,UAAWN,EAAG,eAAgB0C,IAAK0D,GACpClC,EAASnC,KAAI,SAACwC,GAAD,OACZtC,EAAAA,cAAC+E,EAAD,CAAiBtE,IAAK6B,EAAQC,KAAMD,QAASA,e,mECvF9CmC,EAAa,SACxBO,EACAtD,EACA8C,EACAS,QACG,IADHA,IAAAA,EAAe,GAEf,IAAMC,EAAcxD,EAAYuD,EAAe,EAU/CT,EATgBQ,EAASN,QAAO,SAACS,EAAD,EAAoChB,GAAO,IAAlB7B,EAAiB,EAA7BK,WAC3C,IAAKL,EAAQzB,MAAO,OAAOsE,EAE3B,IAAMC,EAAcjB,EAAIe,EAGxB,OADAC,EAASC,GAATD,GAAAA,QAAAA,EAAAA,EAAAA,GAA4BA,EAASC,IAArC,CAAmD9C,IAC5C6C,IACNE,MAAMH,GAAaI,KAAK","sources":["webpack://atelier-mendgen-peissl/./src/utils/images-helper.ts","webpack://atelier-mendgen-peissl/./src/components/image.module.scss","webpack://atelier-mendgen-peissl/./src/components/image.tsx","webpack://atelier-mendgen-peissl/./src/components/seo.tsx","webpack://atelier-mendgen-peissl/./src/hooks/breakpoints.ts","webpack://atelier-mendgen-peissl/./src/pages/index.module.scss","webpack://atelier-mendgen-peissl/./src/components/projectListItem.module.scss","webpack://atelier-mendgen-peissl/./src/components/projectListItem.tsx","webpack://atelier-mendgen-peissl/./src/components/carousel.module.scss","webpack://atelier-mendgen-peissl/./src/components/carousel.tsx","webpack://atelier-mendgen-peissl/./src/pages/index.tsx","webpack://atelier-mendgen-peissl/./src/utils/row-helper.ts"],"sourcesContent":["import { useEffect } from 'react';\n\nconst listenerCallbacks = new WeakMap();\n\nlet observer;\n\nconst handleIntersections = (entries) => {\n  entries.forEach((entry) => {\n    if (listenerCallbacks.has(entry.target)) {\n      const cb = listenerCallbacks.get(entry.target);\n\n      if (entry.isIntersecting || entry.intersectionRatio > 0) {\n        observer.unobserve(entry.target);\n        listenerCallbacks.delete(entry.target);\n        cb();\n      }\n    }\n  });\n};\n\nconst getIntersectionObserver = () => {\n  if (observer === undefined) {\n    observer = new IntersectionObserver(handleIntersections, {\n      rootMargin: '100px',\n      threshold: 0.15,\n    });\n  }\n  return observer;\n};\n\nexport const useIntersection = (elem, callback) => {\n  useEffect(() => {\n    if (!elem.current) return;\n\n    const target = elem.current;\n    const observer = getIntersectionObserver();\n    listenerCallbacks.set(target, callback);\n    observer.observe(target);\n\n    return () => {\n      listenerCallbacks.delete(target);\n      observer.unobserve(target);\n    };\n  }, [elem]);\n};\n","// extracted by mini-css-extract-plugin\nexport var image = \"image-module--image--fZLB5\";\nexport var isLoaded = \"image-module--isLoaded--4+6P8\";\nexport var thumbnail = \"image-module--thumbnail--02+6L\";\nexport var wrapper = \"image-module--wrapper--0wR25\";","import React, { useState, useRef } from 'react';\nimport { useIntersection } from '../utils/images-helper';\n\nimport {\n  ImageType,\n  ImageFileWithWidthMap,\n} from '../interfaces/image.interface';\n\nimport classNames from 'classnames/bind';\nimport * as styles from './image.module.scss';\n\nconst cx = classNames.bind(styles);\n\ntype Props = {\n  image: ImageType;\n  onClick?: () => void;\n  className?: string;\n  imgClassName?: string;\n  alt?: string;\n};\n\nconst Image: React.FC<Props> = ({\n  onClick,\n  className,\n  image,\n  alt,\n  imgClassName,\n}) => {\n  const [loaded, setLoaded] = useState(false);\n\n  const transparentImageUrl =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=';\n\n  const [isInView, setIsInView] = useState(false);\n  const imgRef = useRef();\n  useIntersection(imgRef, () => {\n    setIsInView(true);\n  });\n\n  const widthMap = {\n    thumbnail: {\n      width: '245',\n      minWidth: '0',\n      maxWidth: '245',\n    },\n    small: {\n      width: '500',\n      minWidth: '246',\n      maxWidth: '600',\n    },\n    medium: {\n      width: '750',\n      minWidth: '601',\n      maxWidth: '800',\n    },\n    large: {\n      width: '1000',\n      minWidth: '801',\n      maxWidth: '1200',\n    },\n  };\n\n  const formats: ImageFileWithWidthMap[] = image.formats\n    ? Object.keys(image.formats).map((format) => {\n        return { ...widthMap[format], ...image.formats[format] };\n      })\n    : [];\n\n  return (\n    <div\n      ref={imgRef}\n      className={cx(className, 'wrapper', { isLoaded: loaded })}\n      onClick={onClick}\n    >\n      <div\n        className={cx('placeholder')}\n        style={{\n          paddingTop: `${(image.height / image.width) * 100}%`,\n        }}\n      />\n\n      {isInView && (\n        <>\n          <img\n            className={cx(imgClassName, 'thumbnail')}\n            src={image.formats?.thumbnail?.url || transparentImageUrl}\n            alt={image.alternativeText || alt || image.hash}\n          />\n\n          <picture>\n            {formats.map(({ hash, url, minWidth, maxWidth }) => (\n              <source\n                key={hash}\n                srcSet={url}\n                media={`(min-width: ${minWidth}px) and (max-width: ${maxWidth}px)`}\n              />\n            ))}\n            <img\n              className={cx(imgClassName, 'image')}\n              alt={image.alternativeText || alt || image.hash}\n              src={image.url}\n              onLoad={() => setLoaded(true)}\n            />\n          </picture>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Image;\n","import React from 'react';\nimport { Helmet } from 'react-helmet';\nimport { useLocation } from '@reach/router';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nconst query = graphql`\n  query SEO {\n    site {\n      siteMetadata {\n        url\n      }\n    }\n  }\n`;\n\ntype Props = {\n  title: string;\n  description: string;\n  image: string;\n};\n\nconst SEO: React.FC<Props> = ({ title, description, image }) => {\n  const { pathname } = useLocation();\n  const { site } = useStaticQuery<GatsbyTypes.SEOQuery>(query);\n\n  // if (!site) return null;\n\n  const url = `${site.siteMetadata.url}${pathname}`;\n\n  // const defaultImage = `${siteUrl}${defaultImagePath}`;\n\n  // const seo = {\n  //   title: title || defaultTitle,\n  //   description: description || defaultDescription,\n  //   image: `${image || defaultImage}`,\n  //   url: `${siteUrl}${pathname}`,\n  //   type: type || 'Projects',\n  // };\n\n  return (\n    <Helmet title={title}>\n      {/* Primary */}\n      <meta name=\"title\" content={title} />\n      <meta name=\"description\" content={description} />\n      <meta name=\"image\" content={image} />\n\n      {/* Facebook / OpenGraph */}\n      <meta property=\"og:type\" content=\"website\" />\n      <meta property=\"og:url\" content={url} />\n      <meta property=\"og:title\" content={title} />\n      <meta property=\"og:description\" content={description} />\n      <meta property=\"og:image\" content={image} />\n\n      {/* Twitter */}\n      <meta property=\"twitter:card\" content=\"summary_large_image\" />\n      <meta property=\"twitter:url\" content={url} />\n      <meta property=\"twitter:title\" content={title} />\n      <meta property=\"twitter:description\" content={description} />\n      <meta property=\"twitter:image\" content={image} />\n\n      {/* <script type=\"application/ld+json\">\n        {`\n          {\n            \"@context\": \"${seo.url}\",\n            \"@type\": \"${seo.type}\",\n            \"url\": \"${seo.url}\",\n            \"name\": \"${seo.title}\",\n            \"description\": \"${seo.description}\",\n            \"image\": {\n              \"@type\": \"ImageObject\",\n              \"name\": \"${seo.title}\",\n              \"contentUrl\": \"${seo.image}\"\n            }\n          }\n        `}\n      </script> */}\n      {/* <script type=\"application/ld+json\">\n        {`\n          {\n            \"@context\": \"https://schema.org\",\n            \"@type\": \"NewsArticle\",\n            \"mainEntityOfPage\": {\n              \"@type\": \"WebPage\",\n              \"@id\": \"https://google.com/article\"\n            },\n            \"headline\": \"${seo.title}\",\n            \"image\": [\n              \"${seo.image}\"\n            ],\n            \"publisher\": {\n              \"@type\": \"Organization\",\n              \"name\": \"Atelier Mendgen Peissl\",\n              \"logo\": {\n                \"@type\": \"ImageObject\",\n                \"url\": \"https://google.com/logo.jpg\"\n              }\n            }\n          }\n        `}\n      </script> */}\n      {/* Missing:\n        \"datePublished\": \"2015-02-05T08:00:00+08:00\",\n        \"dateModified\": \"2015-02-05T09:20:00+08:00\",\n      */}\n    </Helmet>\n  );\n};\n\nexport default SEO;\n","import { useState, useEffect } from 'react';\n\nconst DESKTOP_BREAKPOINT = 55 * 16;\n\nexport const useBreakpoints = () => {\n  const [width, setWidth] = useState(null);\n  const [isDesktop, setIsDesktop] = useState(null);\n\n  useEffect(() => {\n    setWidth(window.innerWidth);\n    window.addEventListener('resize', () => setWidth(window.innerWidth));\n  });\n\n  useEffect(() => {\n    setIsDesktop(width > DESKTOP_BREAKPOINT);\n  }, [width]);\n\n  return isDesktop;\n};\n","// extracted by mini-css-extract-plugin\nexport var featuredPhotos = \"index-module--featured-photos--fVigl\";\nexport var projectList = \"index-module--project-list--043C4\";\nexport var projects = \"index-module--projects--uwVVw\";\nexport var subtitle = \"index-module--subtitle--99I5n\";","// extracted by mini-css-extract-plugin\nexport var imageStyle = \"projectListItem-module--image-style--bJd-n\";\nexport var linkStyle = \"projectListItem-module--link-style--dG2eK\";\nexport var projectStyle = \"projectListItem-module--project-style--0JXTV\";","import * as React from 'react';\n\nimport { Link, navigate } from 'gatsby';\n\nimport { ImageType } from '../interfaces/image.interface';\nimport classNames from 'classnames/bind';\nimport * as styles from './projectListItem.module.scss';\nimport Image from './image';\n\nconst cx = classNames.bind(styles);\n\ntype ImageResponse = {\n  data: [\n    {\n      attributes: ImageType;\n    }\n  ];\n};\n\ntype Project = {\n  title: string;\n  slug: string;\n  images: ImageResponse;\n};\n\ntype Props = {\n  project: Project;\n};\n\nconst ProjectListItem: React.FC<Props> = ({\n  project: { title, slug, images },\n}) => {\n  return (\n    <li className={cx('projectStyle')}>\n      {images.data[0] && (\n        <Image\n          className={cx('imageStyle')}\n          image={images.data[0].attributes}\n          alt={title}\n          onClick={() => navigate(`/projects/${slug}`)}\n        />\n      )}\n      <Link className={cx('linkStyle')} to={`/projects/${slug}`}>\n        {title}\n      </Link>\n    </li>\n  );\n};\n\nexport default ProjectListItem;\n","// extracted by mini-css-extract-plugin\nexport var carousel = \"carousel-module--carousel--uKNC3\";\nexport var carouselContainer = \"carousel-module--carousel-container--DT8Gx\";\nexport var image = \"carousel-module--image--z5MTZ\";\nexport var imageContainer = \"carousel-module--image-container--ff3nI\";\nexport var imageWrapper = \"carousel-module--image-wrapper--2KcDF\";\nexport var sliderContainer = \"carousel-module--slider-container--wXhbt\";","import React, { useState, useRef, useEffect } from 'react';\n\nimport classNames from 'classnames/bind';\nimport * as styles from './carousel.module.scss';\n\nconst cx = classNames.bind(styles);\n\nimport Image from './image';\n\ntype Props = {\n  images?: GatsbyTypes.ProjectQuery.strapiProject.images;\n  className?: string;\n};\n\nconst Carousel: React.FC<Props> = ({ images }) => {\n  if (!images || !(images.length > 0)) return null;\n\n  const carouselElement = useRef<HTMLDivElement>();\n  const [imageIndex, _setImageIndex] = useState(0);\n\n  const imagesCount = images.length;\n\n  const setImageIndex = (newImageIndex: number) => {\n    let index = Math.min(\n      Math.max(Math.round(newImageIndex), 0),\n      imagesCount - 1\n    );\n\n    if (newImageIndex >= imagesCount) index = 0;\n\n    _setImageIndex(index);\n  };\n\n  const handleNext = () => setImageIndex(imageIndex + 1);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      handleNext();\n    }, 5000);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  });\n\n  return (\n    <div className={cx('carousel')}>\n      <div className={cx('carouselContainer')}>\n        <div className={cx('sliderContainer')} ref={carouselElement}>\n          {images.map(({ attributes: image }, i) => (\n            <div\n              key={image.hash}\n              className={cx('imageContainer')}\n              style={{\n                opacity: i === imageIndex ? 1 : 0,\n                zIndex: i === imageIndex ? 2 : 1,\n              }}\n            >\n              <Image\n                className={cx('imageWrapper')}\n                imgClassName={cx('image')}\n                image={image}\n              />\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Carousel;\n","import React, { useEffect, useState } from 'react';\nimport { graphql, useStaticQuery } from 'gatsby';\nimport { useBreakpoints } from '../hooks/breakpoints';\n\nimport SEO from '../components/seo';\n\nimport classNames from 'classnames/bind';\nimport * as styles from './index.module.scss';\n\nimport ProjectListItem from '../components/projectListItem';\nimport Carousel from '../components/carousel';\nimport { createRows } from '../utils/row-helper';\n\nconst cx = classNames.bind(styles);\n\nconst IndexPage: React.FC = () => {\n  const data = useStaticQuery<GatsbyTypes.ProjectsQuery>(graphql`\n    query Projects {\n      mpapi {\n        projects(sort: \"placementNumber\", pagination: { limit: 100 }) {\n          data {\n            attributes {\n              images(pagination: { limit: 1 }) {\n                data {\n                  attributes {\n                    alternativeText\n                    height\n                    width\n                    url\n                    formats\n                    hash\n                  }\n                }\n              }\n              title\n              slug\n              featured\n              featuredPhoto {\n                data {\n                  attributes {\n                    alternativeText\n                    formats\n                    hash\n                    height\n                    url\n                    width\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  if (!data.mpapi.projects) return null;\n\n  const [columns, setColumns] = useState([]);\n  const isDesktop = useBreakpoints();\n\n  useEffect(() => {\n    createRows(data.mpapi.projects.data, isDesktop, setColumns);\n  }, [isDesktop]);\n\n  const featuredPhotos = data.mpapi.projects.data.reduce(\n    (featuredPhotos, { attributes: { featured, featuredPhoto } }) => {\n      if (!featured) return featuredPhotos;\n      return [...featuredPhotos, featuredPhoto.data];\n    },\n    []\n  );\n\n  return (\n    <>\n      <SEO\n        title={'Projects | Atelier Mendgen Peissl'}\n        description=\"Architects Anna Mendgen und Dirk Peissl founded Atelier Mendgen Peissl in Berlin in 2012. Find their projects here!\"\n        image=\"https://mendgenpeissl.com/logo.jpg\"\n      />\n\n      {featuredPhotos.length > 0 && isDesktop && (\n        <section className={cx('featuredPhotos')}>\n          <Carousel images={featuredPhotos} />\n        </section>\n      )}\n\n      <h1>Projects</h1>\n\n      <section className={cx('projects')}>\n        {columns.map((projects, i) => (\n          <ul className={cx('projectList')} key={i}>\n            {projects.map((project) => (\n              <ProjectListItem key={project.slug} project={project} />\n            ))}\n          </ul>\n        ))}\n      </section>\n    </>\n  );\n};\n\nexport default IndexPage;\n","type Element = {\n  attributes: {\n    title?: string;\n  };\n};\n\nexport const createRows = (\n  elements: Element[],\n  isDesktop: boolean,\n  setColumns: (columns: any) => void,\n  _columnCount = 2\n) => {\n  const columnCount = isDesktop ? _columnCount : 1;\n  const columns = elements.reduce((_columns, { attributes: project }, i) => {\n    if (!project.title) return _columns;\n\n    const columnIndex = i % columnCount;\n\n    _columns[columnIndex] = [..._columns[columnIndex], project];\n    return _columns;\n  }, Array(columnCount).fill([]));\n\n  setColumns(columns);\n};\n"],"names":["observer","listenerCallbacks","WeakMap","handleIntersections","entries","forEach","entry","has","target","cb","get","isIntersecting","intersectionRatio","unobserve","delete","getIntersectionObserver","undefined","IntersectionObserver","rootMargin","threshold","isLoaded","thumbnail","wrapper","cx","classNames","styles","elem","callback","onClick","className","image","alt","imgClassName","useState","loaded","setLoaded","isInView","setIsInView","imgRef","useRef","useEffect","current","set","observe","widthMap","width","minWidth","maxWidth","small","medium","large","formats","Object","keys","map","format","React","ref","style","paddingTop","height","src","url","alternativeText","hash","key","srcSet","media","onLoad","title","description","pathname","useLocation","useStaticQuery","site","siteMetadata","Helmet","name","content","property","useBreakpoints","setWidth","isDesktop","setIsDesktop","window","innerWidth","addEventListener","featuredPhotos","projectList","projects","subtitle","imageStyle","linkStyle","projectStyle","project","slug","images","data","Image","attributes","navigate","Link","to","carousel","carouselContainer","imageContainer","imageWrapper","sliderContainer","length","carouselElement","imageIndex","_setImageIndex","imagesCount","handleNext","newImageIndex","index","Math","min","max","round","timer","setTimeout","clearTimeout","i","opacity","zIndex","mpapi","columns","setColumns","createRows","reduce","featured","featuredPhoto","SEO","Carousel","ProjectListItem","elements","_columnCount","columnCount","_columns","columnIndex","Array","fill"],"sourceRoot":""}